<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="generator" content="ExDoc v0.34.2"/>
    <meta name="project" content="Ecto v3.12.4"/>
    <title>Ecto.Query.API â€” Ecto v3.12.4
    </title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css"/>
    <script src="dist/handlebars.runtime-NWIB6V2M.js">
    </script>
    <script src="dist/handlebars.templates-K7URE6B4.js">
    </script>
    <script src="dist/sidebar_items-2FBD157F.js">
    </script>
    <script src="docs_config.js">
    </script>
    <script async="async" src="dist/html-YIPIRHGU.js">
    </script>
  </head>
  <body data-type="modules" class="page-module sidebar-closed">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>
    <div class="body-wrapper">
      <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-projectInfo">
            <a href="Ecto.html" class="sidebar-projectImage">
              <img src="assets/logo.png" alt="Ecto"/>
            </a>
            <div>
              <a href="Ecto.html" class="sidebar-projectName" translate="no">
                Ecto
              </a>
              <div class="sidebar-projectVersion" translate="no">
                v3.12.4
              </div>
            </div>
          </div>
          <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
            <li>
            </li>
            <li>
            </li>
            <li>
            </li>
          </ul>
        </div>
        <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
          <ul id="extras-full-list" class="full-list">
          </ul>
        </div>
        <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden="hidden">
          <ul id="modules-full-list" class="full-list">
          </ul>
        </div>
        <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden="hidden">
          <ul id="tasks-full-list" class="full-list">
          </ul>
        </div>
      </nav>
      <main class="content">
        <output role="status" id="toast">
        </output>
        <div id="content" class="content-inner">
          <div class="top-search">
            <div class="search-settings">
              <form class="search-bar" action="search.html">
                <label class="search-label">
                  <span class="sr-only">Search documentation of Ecto
                  </span>
                  <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
                </label>
              </form>
              <div class="autocomplete">
              </div>
            </div>
          </div>
          <div id="top-content">
            <h1>
              <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L1" title="View Source" class="icon-action" rel="help">
                <i class="ri-code-s-slash-line" aria-hidden="true">
                </i>
                <span class="sr-only">View Source
                </span>
              </a>
              <span translate="no">Ecto.Query.API
              </span>
              <small class="app-vsn" translate="no">(Ecto v3.12.4)
              </small>
            </h1>
            <section id="moduledoc">
              <p>Lists all functions allowed in the query API.
              </p>
              <ul>
                <li>Comparison operators:
                  <code class="inline">==
                  </code>,
                  <code class="inline">!=
                  </code>,
                  <code class="inline">
                    <=</code>, <code class="inline">>=
                    </code>,
                  <code class="inline">
                    <</code>, <code class="inline">>
                    </code>
                </li>
                <li>Arithmetic operators:
                  <code class="inline">+
                  </code>,
                  <code class="inline">-
                  </code>,
                  <code class="inline">*
                  </code>,
                  <code class="inline">/
                  </code>
                </li>
                <li>Boolean operators:
                  <code class="inline">and
                  </code>,
                  <code class="inline">or
                  </code>,
                  <code class="inline">not
                  </code>
                </li>
                <li>Inclusion operator:
                  <a href="#in/2">
                    <code class="inline">in/2
                    </code>
                  </a>
                </li>
                <li>Subquery operators:
                  <code class="inline">any
                  </code>,
                  <code class="inline">all
                  </code> and
                  <code class="inline">exists
                  </code>
                </li>
                <li>Search functions:
                  <a href="#like/2">
                    <code class="inline">like/2
                    </code>
                  </a> and
                  <a href="#ilike/2">
                    <code class="inline">ilike/2
                    </code>
                  </a>
                </li>
                <li>Null check functions:
                  <a href="#is_nil/1">
                    <code class="inline">is_nil/1
                    </code>
                  </a>
                </li>
                <li>Aggregates:
                  <a href="#count/0">
                    <code class="inline">count/0
                    </code>
                  </a>,
                  <a href="#count/1">
                    <code class="inline">count/1
                    </code>
                  </a>,
                  <a href="#avg/1">
                    <code class="inline">avg/1
                    </code>
                  </a>,
                  <a href="#sum/1">
                    <code class="inline">sum/1
                    </code>
                  </a>,
                  <a href="#min/1">
                    <code class="inline">min/1
                    </code>
                  </a>,
                  <a href="#max/1">
                    <code class="inline">max/1
                    </code>
                  </a>
                </li>
                <li>Date/time intervals:
                  <a href="#datetime_add/3">
                    <code class="inline">datetime_add/3
                    </code>
                  </a>,
                  <a href="#date_add/3">
                    <code class="inline">date_add/3
                    </code>
                  </a>,
                  <a href="#from_now/2">
                    <code class="inline">from_now/2
                    </code>
                  </a>,
                  <a href="#ago/2">
                    <code class="inline">ago/2
                    </code>
                  </a>
                </li>
                <li>Inside select:
                  <a href="#struct/2">
                    <code class="inline">struct/2
                    </code>
                  </a>,
                  <a href="#map/2">
                    <code class="inline">map/2
                    </code>
                  </a>,
                  <a href="#merge/2">
                    <code class="inline">merge/2
                    </code>
                  </a>,
                  <a href="#selected_as/2">
                    <code class="inline">selected_as/2
                    </code>
                  </a> and literals (map, tuples, lists, etc)
                </li>
                <li>General:
                  <a href="#fragment/1">
                    <code class="inline">fragment/1
                    </code>
                  </a>,
                  <a href="#field/2">
                    <code class="inline">field/2
                    </code>
                  </a>,
                  <a href="#type/2">
                    <code class="inline">type/2
                    </code>
                  </a>,
                  <a href="#as/1">
                    <code class="inline">as/1
                    </code>
                  </a>,
                  <a href="#parent_as/1">
                    <code class="inline">parent_as/1
                    </code>
                  </a>,
                  <a href="#selected_as/1">
                    <code class="inline">selected_as/1
                    </code>
                  </a>
                </li>
              </ul>
              <p>Note the functions in this module exist for documentation
purposes and one should never need to invoke them directly.
Furthermore, it is possible to define your own macros and
use them in Ecto queries (see docs for
                <a href="#fragment/1">
                  <code class="inline">fragment/1
                  </code>
                </a>).
              </p>
              <h2 id="module-intervals" class="section-heading">
                <a href="#module-intervals" class="hover-link">
                  <i class="ri-link-m" aria-hidden="true">
                  </i>
                </a>
                <span class="text">Intervals
                </span>
              </h2>
              <p>Ecto supports following values for
                <code class="inline">interval
                </code> option:
                <code class="inline">"year"
                </code>,
                <code class="inline">"month"
                </code>,
                <code class="inline">"week"
                </code>,
                <code class="inline">"day"
                </code>,
                <code class="inline">"hour"
                </code>,
                <code class="inline">"minute"
                </code>,
                <code class="inline">"second"
                </code>,
                <code class="inline">"millisecond"
                </code>, and
                <code class="inline">"microsecond"
                </code>.
              </p>
              <p>
                <a href="https://hexdocs.pm/elixir/Date.html">
                  <code class="inline">Date
                  </code>
                </a>/
                <a href="https://hexdocs.pm/elixir/Time.html">
                  <code class="inline">Time
                  </code>
                </a> functions like
                <a href="#datetime_add/3">
                  <code class="inline">datetime_add/3
                  </code>
                </a>,
                <a href="#date_add/3">
                  <code class="inline">date_add/3
                  </code>
                </a>,
                <a href="#from_now/2">
                  <code class="inline">from_now/2
                  </code>
                </a>,
                <a href="#ago/2">
                  <code class="inline">ago/2
                  </code>
                </a> take
                <code class="inline">interval
                </code> as an argument.
              </p>
              <h2 id="module-window-api" class="section-heading">
                <a href="#module-window-api" class="hover-link">
                  <i class="ri-link-m" aria-hidden="true">
                  </i>
                </a>
                <span class="text">Window API
                </span>
              </h2>
              <p>Ecto also supports many of the windows functions found
in SQL databases. See
                <a href="Ecto.Query.WindowAPI.html">
                  <code class="inline">Ecto.Query.WindowAPI
                  </code>
                </a> for more
information.
              </p>
              <h2 id="module-about-the-arithmetic-operators" class="section-heading">
                <a href="#module-about-the-arithmetic-operators" class="hover-link">
                  <i class="ri-link-m" aria-hidden="true">
                  </i>
                </a>
                <span class="text">About the arithmetic operators
                </span>
              </h2>
              <p>The Ecto implementation of these operators provide only
a thin layer above the adapters. So if your adapter allows you
to use them in a certain way (like adding a date and an
interval in PostgreSQL), it should work just fine in Ecto
queries.
              </p>
            </section>
          </div>
          <section id="summary" class="details-list">
            <h1 class="section-heading">
              <a class="hover-link" href="#summary">
                <i class="ri-link-m" aria-hidden="true">
                </i>
              </a>
              <span class="text">Summary
              </span>
            </h1>
            <div class="summary-functions summary">
              <h2>
                <a href="#functions">Functions
                </a>
              </h2>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#*/2" data-no-tooltip="data-no-tooltip" translate="no">left * right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">*
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#+/2" data-no-tooltip="data-no-tooltip" translate="no">left + right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">+
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#-/2" data-no-tooltip="data-no-tooltip" translate="no">left - right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">-
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#//2" data-no-tooltip="data-no-tooltip" translate="no">left / right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">/
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#!=/2" data-no-tooltip="data-no-tooltip" translate="no">left != right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">!=
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#%3C/2" data-no-tooltip="data-no-tooltip" translate="no">left
                    < right</a></div><div class="summary-synopsis"><p>Binary <code class="inline"><</code> operation.</p></div></div><div class="summary-row"><div class="summary-signature"><a href="#%3C=/2" data-no-tooltip="data-no-tooltip" translate="no">left <= right</a></div><div class="summary-synopsis"><p>Binary <code class="inline"><=</code> operation.</p></div></div><div class="summary-row"><div class="summary-signature"><a href="#==/2" data-no-tooltip="data-no-tooltip" translate="no">left == right</a></div><div class="summary-synopsis"><p>Binary <code class="inline">==</code> operation.</p></div></div><div class="summary-row"><div class="summary-signature"><a href="#%3E/2" data-no-tooltip="data-no-tooltip" translate="no">left > right</a></div><div class="summary-synopsis"><p>Binary <code class="inline">></code> operation.</p></div></div><div class="summary-row"><div class="summary-signature"><a href="#%3E=/2" data-no-tooltip="data-no-tooltip" translate="no">left >= right</a></div><div class="summary-synopsis"><p>Binary <code class="inline">>=
                    </code> operation.
                    </p>
                    </div>
                    </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#ago/2" data-no-tooltip="data-no-tooltip" translate="no">ago(count, interval)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Subtracts the given interval from the current time in UTC.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#all/1" data-no-tooltip="data-no-tooltip" translate="no">all(subquery)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Evaluates whether all values returned from the provided subquery match in a comparison operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#and/2" data-no-tooltip="data-no-tooltip" translate="no">left and right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">and
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#any/1" data-no-tooltip="data-no-tooltip" translate="no">any(subquery)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Tests whether one or more values returned from the provided subquery match in a comparison operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#as/1" data-no-tooltip="data-no-tooltip" translate="no">as(binding)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Refer to a named atom binding.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#avg/1" data-no-tooltip="data-no-tooltip" translate="no">avg(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Calculates the average for the given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#coalesce/2" data-no-tooltip="data-no-tooltip" translate="no">coalesce(value, expr)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Takes the first value which is not null, or null if they both are.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#count/0" data-no-tooltip="data-no-tooltip" translate="no">count()
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Counts the entries in the table.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#count/1" data-no-tooltip="data-no-tooltip" translate="no">count(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Counts the given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#count/2" data-no-tooltip="data-no-tooltip" translate="no">count(value, atom)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Counts the distinct values in given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#date_add/3" data-no-tooltip="data-no-tooltip" translate="no">date_add(date, count, interval)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Adds a given interval to a date.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#datetime_add/3" data-no-tooltip="data-no-tooltip" translate="no">datetime_add(datetime, count, interval)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Adds a given interval to a datetime.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#exists/1" data-no-tooltip="data-no-tooltip" translate="no">exists(subquery)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Evaluates to true if the provided subquery returns 1 or more rows.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#field/2" data-no-tooltip="data-no-tooltip" translate="no">field(source, field)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Allows a field to be dynamically accessed.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#filter/2" data-no-tooltip="data-no-tooltip" translate="no">filter(value, filter)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Applies the given expression as a FILTER clause against an
aggregate. This is currently only supported by Postgres.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#fragment/1" data-no-tooltip="data-no-tooltip" translate="no">fragment(fragments)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Send fragments directly to the database.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#from_now/2" data-no-tooltip="data-no-tooltip" translate="no">from_now(count, interval)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Adds the given interval to the current time in UTC.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#ilike/2" data-no-tooltip="data-no-tooltip" translate="no">ilike(string, search)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Searches for
                    <code class="inline">search
                    </code> in
                    <code class="inline">string
                    </code> in a case insensitive fashion.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#in/2" data-no-tooltip="data-no-tooltip" translate="no">left in right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Checks if the left-value is included in the right one.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#is_nil/1" data-no-tooltip="data-no-tooltip" translate="no">is_nil(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Checks if the given value is nil.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#json_extract_path/2" data-no-tooltip="data-no-tooltip" translate="no">json_extract_path(json_field, path)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Returns value from the
                    <code class="inline">json_field
                    </code> pointed to by
                    <code class="inline">path
                    </code>.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#like/2" data-no-tooltip="data-no-tooltip" translate="no">like(string, search)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Searches for
                    <code class="inline">search
                    </code> in
                    <code class="inline">string
                    </code>.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#literal/1" data-no-tooltip="data-no-tooltip" translate="no">literal(binary)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Allows a literal identifier to be injected into a fragment
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#map/2" data-no-tooltip="data-no-tooltip" translate="no">map(source, fields)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Used in
                    <code class="inline">select
                    </code> to specify which fields should be returned as a map.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#max/1" data-no-tooltip="data-no-tooltip" translate="no">max(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Calculates the maximum for the given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#merge/2" data-no-tooltip="data-no-tooltip" translate="no">merge(left_map, right_map)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Merges the map on the right over the map on the left.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#min/1" data-no-tooltip="data-no-tooltip" translate="no">min(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Calculates the minimum for the given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#not/1" data-no-tooltip="data-no-tooltip" translate="no">not value
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Unary
                    <code class="inline">not
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#or/2" data-no-tooltip="data-no-tooltip" translate="no">left or right
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Binary
                    <code class="inline">or
                    </code> operation.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#parent_as/1" data-no-tooltip="data-no-tooltip" translate="no">parent_as(binding)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Refer to a named atom binding in the parent query.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#selected_as/1" data-no-tooltip="data-no-tooltip" translate="no">selected_as(name)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Refer to an alias of a selected value.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#selected_as/2" data-no-tooltip="data-no-tooltip" translate="no">selected_as(selected_value, name)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Creates an alias for the given selected value.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#splice/1" data-no-tooltip="data-no-tooltip" translate="no">splice(list)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Allows a list argument to be spliced into a fragment.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#struct/2" data-no-tooltip="data-no-tooltip" translate="no">struct(source, fields)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Used in
                    <code class="inline">select
                    </code> to specify which struct fields should be returned.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#sum/1" data-no-tooltip="data-no-tooltip" translate="no">sum(value)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Calculates the sum for the given entry.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#type/2" data-no-tooltip="data-no-tooltip" translate="no">type(interpolated_value, type)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Casts the given value to the given type at the database level.
                  </p>
                </div>
              </div>
              <div class="summary-row">
                <div class="summary-signature">
                  <a href="#values/2" data-no-tooltip="data-no-tooltip" translate="no">values(values, types)
                  </a>
                </div>
                <div class="summary-synopsis">
                  <p>Creates a values list/constant table.
                  </p>
                </div>
              </div>
            </div>
          </section>
          <section id="functions" class="details-list">
            <h1 class="section-heading">
              <a class="hover-link" href="#functions">
                <i class="ri-link-m" aria-hidden="true">
                </i>
              </a>
              <span class="text">Functions
              </span>
            </h1>
            <div class="functions-list">
              <section class="detail" id="*/2">
                <div class="detail-header">
                  <a href="#*/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left * right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L91" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">*
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="+/2">
                <div class="detail-header">
                  <a href="#+/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left + right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L81" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">+
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="-/2">
                <div class="detail-header">
                  <a href="#-/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left - right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L86" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">-
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="//2">
                <div class="detail-header">
                  <a href="#//2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left / right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L96" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">/
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="!=/2">
                <div class="detail-header">
                  <a href="#!=/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left != right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L56" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">!=
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="%3C/2">
                <div class="detail-header">
                  <a href="#%3C/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left
                    < right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L71" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline"><</code> operation.</p></section></section><section class="detail" id="%3C=/2"><div class="detail-header"><a href="#%3C=/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left <= right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L61" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline"><=</code> operation.</p></section></section><section class="detail" id="==/2"><div class="detail-header"><a href="#==/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left == right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L51" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline">==</code> operation.</p></section></section><section class="detail" id="%3E/2"><div class="detail-header"><a href="#%3E/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left > right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L76" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline">></code> operation.</p></section></section><section class="detail" id="%3E=/2"><div class="detail-header"><a href="#%3E=/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left >= right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L66" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline">>=
                    </code> operation.
                    </p>
                    </section>
                    </section>
              <section class="detail" id="ago/2">
                <div class="detail-header">
                  <a href="#ago/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">ago(count, interval)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L372" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Subtracts the given interval from the current time in UTC.
                  </p>
                  <p>The current time in UTC is retrieved from Elixir and
not from the database.
                  </p>
                  <p>See
                    <a href="#module-intervals">Intervals
                    </a> for supported
                    <code class="inline">interval
                    </code> values.
                  </p>
                  <h2 id="ago/2-examples" class="section-heading">
                    <a href="#ago/2-examples" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">Examples
                    </span>
                  </h2>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">published_at
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">ago
                      </span>
                      <span class="p" data-group-id="3876117867-1">(
                      </span>
                      <span class="mi">3
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"month"
                      </span>
                      <span class="p" data-group-id="3876117867-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="all/1">
                <div class="detail-header">
                  <a href="#all/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">all(subquery)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L207" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Evaluates whether all values returned from the provided subquery match in a comparison operation.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">all
                      </span>
                      <span class="p" data-group-id="2931793136-1">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="2931793136-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">avg
                      </span>
                      <span class="p" data-group-id="2931793136-3">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p" data-group-id="2931793136-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">group_by
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2931793136-4">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">category_id
                      </span>
                      <span class="p" data-group-id="2931793136-4">]
                      </span>
                      <span class="p" data-group-id="2931793136-2">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2931793136-1">)
                      </span>
                    </code>
                  </pre>
                  <p>For a post to match in the above example it must be visited at least as much as the average post in all categories.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">all
                      </span>
                      <span class="p" data-group-id="9607731061-1">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="9607731061-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">max
                      </span>
                      <span class="p" data-group-id="9607731061-3">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p" data-group-id="9607731061-3">)
                      </span>
                      <span class="p" data-group-id="9607731061-2">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9607731061-1">)
                      </span>
                    </code>
                  </pre>
                  <p>The above example matches all the posts which are tied for being the most visited.
                  </p>
                  <p>Both
                    <code class="inline">any
                    </code> and
                    <code class="inline">all
                    </code> must be given a subquery as an argument, and they must be used on the right hand side of a comparison.
Both can be used with every comparison operator:
                    <code class="inline">==
                    </code>,
                    <code class="inline">!=
                    </code>,
                    <code class="inline">>
                    </code>,
                    <code class="inline">>=
                    </code>,
                    <code class="inline">
                      <</code>, <code class="inline"><=</code>.</p></section></section><section class="detail" id="and/2"><div class="detail-header"><a href="#and/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left and right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L101" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Binary <code class="inline">and</code> operation.</p></section></section><section class="detail" id="any/1"><div class="detail-header"><a href="#any/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">any(subquery)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L187" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Tests whether one or more values returned from the provided subquery match in a comparison operation.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Product</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="w"></span><span class="o">==</span><span class="w"></span><span class="n">any</span><span class="p" data-group-id="5606458095-1">(</span><span class="w"></span><span class="n">from</span><span class="p" data-group-id="5606458095-2">(</span><span class="n">li</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">LineItem</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="p" data-group-id="5606458095-3">[</span><span class="n">li</span><span class="o">.</span><span class="n">product_id</span><span class="p" data-group-id="5606458095-3">]</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">li</span><span class="o">.</span><span class="n">created_at</span><span class="w"></span><span class="o">></span><span class="w"></span><span class="o">^</span><span class="n">since</span><span class="w"></span><span class="ow">and</span><span class="w"></span><span class="n">li</span><span class="o">.</span><span class="n">qty</span><span class="w"></span><span class="o">>=
                      </span>
                        <span class="w">
                        </span>
                        <span class="mi">10
                        </span>
                        <span class="p" data-group-id="5606458095-2">)
                        </span>
                        <span class="w">
                        </span>
                        <span class="p" data-group-id="5606458095-1">)
                        </span>
                      </code>
                      </pre>
                        <p>A product matches in the above example if a line item was created since the provided date where the customer purchased
at least 10 units.
                        </p>
                        <p>Both
                          <code class="inline">any
                          </code> and
                          <code class="inline">all
                          </code> must be given a subquery as an argument, and they must be used on the right hand side of a comparison.
Both can be used with every comparison operator:
                          <code class="inline">==
                          </code>,
                          <code class="inline">!=
                          </code>,
                          <code class="inline">>
                          </code>,
                          <code class="inline">>=
                          </code>,
                          <code class="inline">
                            <</code>, <code class="inline"><=</code>.</p></section></section><section class="detail" id="as/1"><div class="detail-header"><a href="#as/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">as(binding)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L804" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Refer to a named atom binding.</p><p>See the "Named bindings" section in <a href="Ecto.Query.html"><code class="inline">Ecto.Query</code></a> for more information.</p></section></section><section class="detail" id="avg/1"><div class="detail-header"><a href="#avg/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">avg(value)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L294" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Calculates the average for the given entry.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Payment</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">avg</span><span class="p" data-group-id="7887932996-1">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p" data-group-id="7887932996-1">)</span></code></pre></section></section><section class="detail" id="coalesce/2"><div class="detail-header"><a href="#coalesce/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">coalesce(value, expr)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L277" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Takes the first value which is not null, or null if they both are.</p><p>In SQL, COALESCE takes any number of arguments, but in ecto
it only takes two, so it must be chained to achieve the same
effect.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Payment</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="w"></span><span class="o">|></span><span class="w"></span><span class="n">coalesce</span><span class="p" data-group-id="5547005559-1">(</span><span class="n">p</span><span class="o">.</span><span class="n">backup_value</span><span class="p" data-group-id="5547005559-1">)</span><span class="w"></span><span class="o">|>
</span>
  <span class="w">
  </span>
  <span class="n">coalesce
  </span>
  <span class="p" data-group-id="5547005559-2">(
  </span>
  <span class="mi">0
  </span>
  <span class="p" data-group-id="5547005559-2">)
  </span>
</code>
</pre>
                            </section>
                            </section>
              <section class="detail" id="count/0">
                <div class="detail-header">
                  <a href="#count/0" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">count()
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L252" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Counts the entries in the table.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">count
                      </span>
                      <span class="p" data-group-id="6218156985-1">(
                      </span>
                      <span class="p" data-group-id="6218156985-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="count/1">
                <div class="detail-header">
                  <a href="#count/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">count(value)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L259" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Counts the given entry.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">count
                      </span>
                      <span class="p" data-group-id="5442186379-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p" data-group-id="5442186379-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="count/2">
                <div class="detail-header">
                  <a href="#count/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">count(value, atom)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L266" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Counts the distinct values in given entry.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">count
                      </span>
                      <span class="p" data-group-id="9666588948-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:distinct
                      </span>
                      <span class="p" data-group-id="9666588948-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="date_add/3">
                <div class="detail-header">
                  <a href="#date_add/3" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">date_add(date, count, interval)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L343" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Adds a given interval to a date.
                  </p>
                  <p>See
                    <a href="#datetime_add/3">
                      <code class="inline">datetime_add/3
                      </code>
                    </a> for more information.
                  </p>
                  <p>See
                    <a href="#module-intervals">Intervals
                    </a> for supported
                    <code class="inline">interval
                    </code> values.
                  </p>
                </section>
              </section>
              <section class="detail" id="datetime_add/3">
                <div class="detail-header">
                  <a href="#datetime_add/3" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">datetime_add(datetime, count, interval)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L334" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Adds a given interval to a datetime.
                  </p>
                  <p>The first argument is a
                    <code class="inline">datetime
                    </code>, the second one is the count
for the interval, which may be either positive or negative and
the interval value:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="c1"># Get all items published since the last month
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">published_at
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">datetime_add
                      </span>
                      <span class="p" data-group-id="8743808032-1">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="nc">NaiveDateTime
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">utc_now
                      </span>
                      <span class="p" data-group-id="8743808032-2">(
                      </span>
                      <span class="p" data-group-id="8743808032-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">-
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"month"
                      </span>
                      <span class="p" data-group-id="8743808032-1">)
                      </span>
                    </code>
                  </pre>
                  <p>In the example above, we used
                    <a href="#datetime_add/3">
                      <code class="inline">datetime_add/3
                      </code>
                    </a> to subtract one month
from the current datetime and compared it with the
                    <code class="inline">p.published_at
                    </code>.
If you want to perform operations on date,
                    <a href="#date_add/3">
                      <code class="inline">date_add/3
                      </code>
                    </a> could be used.
                  </p>
                  <p>See
                    <a href="#module-intervals">Intervals
                    </a> for supported
                    <code class="inline">interval
                    </code> values.
                  </p>
                </section>
              </section>
              <section class="detail" id="exists/1">
                <div class="detail-header">
                  <a href="#exists/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">exists(subquery)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L172" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Evaluates to true if the provided subquery returns 1 or more rows.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">as
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">exists
                      </span>
                      <span class="p" data-group-id="0906741988-1">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="0906741988-2">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Comment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">parent_as
                      </span>
                      <span class="p" data-group-id="0906741988-3">(
                      </span>
                      <span class="ss">:post
                      </span>
                      <span class="p" data-group-id="0906741988-3">)
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">post_id
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">and
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">replies_count
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">5
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0906741988-2">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0906741988-1">)
                      </span>
                    </code>
                  </pre>
                  <p>This is best used in conjunction with
                    <code class="inline">parent_as
                    </code> to correlate the subquery
with the parent query to test some condition on related rows in a different table.
In the above example the query returns posts which have at least one comment that
has more than 5 replies.
                  </p>
                </section>
              </section>
              <section class="detail" id="field/2">
                <div class="detail-header">
                  <a href="#field/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">field(source, field)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L575" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Allows a field to be dynamically accessed.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="kd">def
                      </span>
                      <span class="w">
                      </span>
                      <span class="nf">at_least_four
                      </span>
                      <span class="p" data-group-id="6429134245-1">(
                      </span>
                      <span class="n">doors_or_tires
                      </span>
                      <span class="p" data-group-id="6429134245-1">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="k" data-group-id="6429134245-2">do
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Car
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">field
                      </span>
                      <span class="p" data-group-id="6429134245-3">(
                      </span>
                      <span class="n">c
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">doors_or_tires
                      </span>
                      <span class="p" data-group-id="6429134245-3">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>=
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">4
                      </span>
                      <span class="w">
                      </span>
                      <span class="k" data-group-id="6429134245-2">end
                      </span>
                    </code>
                  </pre>
                  <p>In the example above, both
                    <code class="inline">at_least_four(:doors)
                    </code> and
                    <code class="inline">at_least_four(:tires)
                    </code>
                    would be valid calls as the field is dynamically generated.
                  </p>
                </section>
              </section>
              <section class="detail" id="filter/2">
                <div class="detail-header">
                  <a href="#filter/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">filter(value, filter)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L287" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Applies the given expression as a FILTER clause against an
aggregate. This is currently only supported by Postgres.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Payment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">filter
                      </span>
                      <span class="p" data-group-id="8083317127-1">(
                      </span>
                      <span class="n">avg
                      </span>
                      <span class="p" data-group-id="8083317127-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="p" data-group-id="8083317127-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">and
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">
                        <</span><span class="w"></span><span class="mi">100</span><span class="p" data-group-id="8083317127-1">)</span><span class="w"></span><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Payment</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">avg</span><span class="p" data-group-id="8083317127-3">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p" data-group-id="8083317127-3">)</span><span class="w"></span><span class="o">|>
                        </span>
                      <span class="w">
                      </span>
                      <span class="n">filter
                      </span>
                      <span class="p" data-group-id="8083317127-4">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">
                        <</span><span class="w"></span><span class="mi">0</span><span class="p" data-group-id="8083317127-4">)</span></code></pre></section></section><section class="detail" id="fragment/1"><div class="detail-header"><a href="#fragment/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">fragment(fragments)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L480" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Send fragments directly to the database.</p><p>It is not possible to represent all possible database queries using
Ecto's query syntax. When such is required, it is possible to use
fragments to send any expression to the database:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"></span><span class="nf">unpublished_by_title</span><span class="p" data-group-id="5568763106-1">(</span><span class="n">title</span><span class="p" data-group-id="5568763106-1">)</span><span class="w"></span><span class="k" data-group-id="5568763106-2">do</span><span class="w"></span><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">is_nil</span><span class="p" data-group-id="5568763106-3">(</span><span class="n">p</span><span class="o">.</span><span class="n">published_at</span><span class="p" data-group-id="5568763106-3">)</span><span class="w"></span><span class="ow">and</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="5568763106-4">(</span><span class="s">"lower(?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="p" data-group-id="5568763106-4">)</span><span class="w"></span><span class="o">==</span><span class="w"></span><span class="o">^</span><span class="n">title</span><span class="w"></span><span class="k" data-group-id="5568763106-2">end</span></code></pre><p>Every occurrence of the <code class="inline">?</code> character will be interpreted as a place
for parameters, which must be given as additional arguments to
  <code class="inline">fragment</code>. If the literal character <code class="inline">?</code> is required as part of the
fragment, it can be escaped with <code class="inline">\\?</code> (one escape for strings,
another for fragment).</p><p>In the example above, we are using the lower procedure in the
database to downcase the title column.</p><p>It is very important to keep in mind that Ecto is unable to do any
type casting when fragments are used. Therefore it may be necessary
to explicitly cast parameters via <a href="#type/2"><code class="inline">type/2</code></a>:</p><pre><code class="makeup elixir" translate="no"><span class="n">fragment</span><span class="p" data-group-id="7418053099-1">(</span><span class="s">"lower(?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="p" data-group-id="7418053099-1">)</span><span class="w"></span><span class="o">==</span><span class="w"></span><span class="n">type</span><span class="p" data-group-id="7418053099-2">(</span><span class="o">^</span><span class="n">title</span><span class="p">,</span><span class="w"></span><span class="ss">:string</span><span class="p" data-group-id="7418053099-2">)</span></code></pre><h2 id="fragment/1-literals" class="section-heading"><a href="#fragment/1-literals" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Literals</span></h2><p>Sometimes you need to interpolate a literal value into a fragment,
instead of a parameter. For example, you may need to pass a table
name or a collation, such as:</p><pre><code class="makeup elixir" translate="no"><span class="n">collation</span><span class="w"></span><span class="o">=</span><span class="w"></span><span class="s">"es_ES"</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="8538256926-1">(</span><span class="s">"? COLLATE ?"</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="n">name</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="n">collation</span><span class="p" data-group-id="8538256926-1">)</span></code></pre><p>The example above won't work because <code class="inline">collation</code> will be passed
as a parameter, while it has to be a literal part of the query.</p><p>You can address this by telling Ecto that variable is a literal:</p><pre><code class="makeup elixir" translate="no"><span class="n">fragment</span><span class="p" data-group-id="5528439513-1">(</span><span class="s">"? COLLATE ?"</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="n">name</span><span class="p">,</span><span class="w"></span><span class="n">literal</span><span class="p" data-group-id="5528439513-2">(</span><span class="o">^</span><span class="n">collation</span><span class="p" data-group-id="5528439513-2">)</span><span class="p" data-group-id="5528439513-1">)</span></code></pre><p>Ecto will then escape it and make it part of the query.</p><blockquote><h4 class="warning">Literals and query caching</h4><p>Because literals are made part of the query, each interpolated
literal will generate a separate query, with its own cache.</p></blockquote><h2 id="fragment/1-splicing" class="section-heading"><a href="#fragment/1-splicing" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Splicing</span></h2><p>Sometimes you may need to interpolate a variable number of arguments
into the same fragment. For example, when overriding Ecto's default
  <code class="inline">where</code> behaviour for Postgres:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="2583399593-1">(</span><span class="s">"? in (?, ?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span><span class="n">val1</span><span class="p">,</span><span class="w"></span><span class="n">val2</span><span class="p" data-group-id="2583399593-1">)</span></code></pre><p>The example above will only work if you know the number of arguments
upfront. If it can vary, the above will not work.</p><p>You can address this by telling Ecto to splice a list argument into
the fragment:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="0577325904-1">(</span><span class="s">"? in (?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span><span class="n">splice</span><span class="p" data-group-id="0577325904-2">(</span><span class="o">^</span><span class="n">val_list</span><span class="p" data-group-id="0577325904-2">)</span><span class="p" data-group-id="0577325904-1">)</span></code></pre><p>This will let Ecto know it should expand the values of the list into
separate fragment arguments. For example:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="1362652394-1">(</span><span class="s">"? in (?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span><span class="n">splice</span><span class="p" data-group-id="1362652394-2">(</span><span class="o">^</span><span class="p" data-group-id="1362652394-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"></span><span class="mi">2</span><span class="p">,</span><span class="w"></span><span class="mi">3</span><span class="p" data-group-id="1362652394-3">]</span><span class="p" data-group-id="1362652394-2">)</span><span class="p" data-group-id="1362652394-1">)</span></code></pre><p>would be expanded into</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="6185131715-1">(</span><span class="s">"? in (?,?,?)"</span><span class="p">,</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="mi">1</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="mi">2</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="mi">3</span><span class="p" data-group-id="6185131715-1">)</span></code></pre><h2 id="fragment/1-defining-custom-functions-using-macros-and-fragment" class="section-heading"><a href="#fragment/1-defining-custom-functions-using-macros-and-fragment" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Defining custom functions using macros and fragment</span></h2><p>You can add a custom Ecto query function using macros.  For example
to expose SQL's coalesce function you can define this macro:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"></span><span class="nc">CustomFunctions</span><span class="w"></span><span class="k" data-group-id="8142105763-1">do</span><span class="w"></span><span class="kd">defmacro</span><span class="w"></span><span class="nf">coalesce</span><span class="p" data-group-id="8142105763-2">(</span><span class="n">left</span><span class="p">,</span><span class="w"></span><span class="n">right</span><span class="p" data-group-id="8142105763-2">)</span><span class="w"></span><span class="k" data-group-id="8142105763-3">do</span><span class="w"></span><span class="k">quote</span><span class="w"></span><span class="k" data-group-id="8142105763-4">do</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="8142105763-5">(</span><span class="s">"coalesce(?, ?)"</span><span class="p">,</span><span class="w"></span><span class="k">unquote</span><span class="p" data-group-id="8142105763-6">(</span><span class="n">left</span><span class="p" data-group-id="8142105763-6">)</span><span class="p">,</span><span class="w"></span><span class="k">unquote</span><span class="p" data-group-id="8142105763-7">(</span><span class="n">right</span><span class="p" data-group-id="8142105763-7">)</span><span class="p" data-group-id="8142105763-5">)</span><span class="w"></span><span class="k" data-group-id="8142105763-4">end</span><span class="w"></span><span class="k" data-group-id="8142105763-3">end</span><span class="w"></span><span class="k" data-group-id="8142105763-1">end</span></code></pre><p>To have coalesce/2 available, just import the module that defines it.</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"></span><span class="nc">CustomFunctions</span></code></pre><p>The only downside is that it will show up as a fragment when
inspecting the Elixir query.  Other than that, it should be
equivalent to a built-in Ecto query function.</p><h2 id="fragment/1-keyword-fragments" class="section-heading"><a href="#fragment/1-keyword-fragments" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Keyword fragments</span></h2><p>In order to support databases that do not have string-based
queries, like MongoDB, fragments also allow keywords to be given:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">fragment</span><span class="p" data-group-id="9870887450-1">(</span><span class="ss">title</span><span class="p">:</span><span class="w"></span><span class="p" data-group-id="9870887450-2">[</span><span class="ss">"$eq"</span><span class="p">:</span><span class="w"></span><span class="o">^</span><span class="n">some_value</span><span class="p" data-group-id="9870887450-2">]</span><span class="p" data-group-id="9870887450-1">)</span></code></pre></section></section><section class="detail" id="from_now/2"><div class="detail-header"><a href="#from_now/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">from_now(count, interval)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L358" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Adds the given interval to the current time in UTC.</p><p>The current time in UTC is retrieved from Elixir and
not from the database.</p><p>See <a href="#module-intervals">Intervals</a> for supported <code class="inline">interval</code> values.</p><h2 id="from_now/2-examples" class="section-heading"><a href="#from_now/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">a</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Account</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">a</span><span class="o">.</span><span class="n">expires_at</span><span class="w"></span><span class="o"><</span><span class="w"></span><span class="n">from_now</span><span class="p" data-group-id="3357132886-1">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span><span class="s">"month"</span><span class="p" data-group-id="3357132886-1">)</span></code></pre></section></section><section class="detail" id="ilike/2"><div class="detail-header"><a href="#ilike/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">ilike(string, search)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L234" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Searches for <code class="inline">search</code> in <code class="inline">string</code> in a case insensitive fashion.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">ilike</span><span class="p" data-group-id="6500853169-1">(</span><span class="n">p</span><span class="o">.</span><span class="n">body</span><span class="p">,</span><span class="w"></span><span class="s">"Chapter%"</span><span class="p" data-group-id="6500853169-1">)</span></code></pre><p>Translates to the underlying SQL ILIKE query. This operation is
only available on PostgreSQL.</p></section></section><section class="detail" id="in/2"><div class="detail-header"><a href="#in/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">left in right</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L151" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Checks if the left-value is included in the right one.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="p" data-group-id="5582425824-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"></span><span class="mi">2</span><span class="p">,</span><span class="w"></span><span class="mi">3</span><span class="p" data-group-id="5582425824-1">]</span></code></pre><p>The right side may either be a literal list, an interpolated list,
any struct that implements the <a href="https://hexdocs.pm/elixir/Enumerable.html"><code class="inline">Enumerable</code></a> protocol, or even a
column in the database with array type:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="s">"elixir"</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">tags</span></code></pre><p>Additionally, the right side may also be a subquery, which should return
a single column:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">c</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Comment</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">c</span><span class="o">.</span><span class="n">post_id</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="n">subquery</span><span class="p" data-group-id="1637402291-1">(</span><span class="w"></span><span class="n">from</span><span class="p" data-group-id="1637402291-2">(</span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">created_at</span><span class="w"></span><span class="o">></span><span class="w"></span><span class="o">^</span><span class="n">since</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="1637402291-2">)</span><span class="w"></span><span class="p" data-group-id="1637402291-1">)</span></code></pre></section></section><section class="detail" id="is_nil/1"><div class="detail-header"><a href="#is_nil/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">is_nil(value)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L245" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Checks if the given value is nil.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="n">is_nil</span><span class="p" data-group-id="0615328900-1">(</span><span class="n">p</span><span class="o">.</span><span class="n">published_at</span><span class="p" data-group-id="0615328900-1">)</span></code></pre><p>To check if a given value is not nil use:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="w"></span><span class="n">p</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">where</span><span class="p">:</span><span class="w"></span><span class="ow">not</span><span class="w"></span><span class="n">is_nil</span><span class="p" data-group-id="1024164561-1">(</span><span class="n">p</span><span class="o">.</span><span class="n">published_at</span><span class="p" data-group-id="1024164561-1">)</span></code></pre></section></section><section class="detail" id="json_extract_path/2"><div class="detail-header"><a href="#json_extract_path/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function"><i class="ri-link-m" aria-hidden="true"></i><span class="sr-only">Link to this function</span></a><h1 class="signature" translate="no">json_extract_path(json_field, path)</h1><a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L736" class="icon-action" rel="help" title="View Source"><i class="ri-code-s-slash-line" aria-hidden="true"></i><span class="sr-only">View Source</span></a></div><section class="docstring"><p>Returns value from the <code class="inline">json_field</code> pointed to by <code class="inline">path</code>.</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="p" data-group-id="4486443771-1">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">json_extract_path</span><span class="p" data-group-id="4486443771-2">(</span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">,</span><span class="w"></span><span class="p" data-group-id="4486443771-3">[</span><span class="s">"author"</span><span class="p">,</span><span class="w"></span><span class="s">"name"</span><span class="p" data-group-id="4486443771-3">]</span><span class="p" data-group-id="4486443771-2">)</span><span class="p" data-group-id="4486443771-1">)</span></code></pre><p>The path can be dynamic:</p><pre><code class="makeup elixir" translate="no"><span class="n">path</span><span class="w"></span><span class="o">=</span><span class="w"></span><span class="p" data-group-id="5795386401-1">[</span><span class="s">"author"</span><span class="p">,</span><span class="w"></span><span class="s">"name"</span><span class="p" data-group-id="5795386401-1">]</span><span class="w"></span><span class="n">from</span><span class="p" data-group-id="5795386401-2">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">json_extract_path</span><span class="p" data-group-id="5795386401-3">(</span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="n">path</span><span class="p" data-group-id="5795386401-3">)</span><span class="p" data-group-id="5795386401-2">)</span></code></pre><p>And the field can also be dynamic in combination with it:</p><pre><code class="makeup elixir" translate="no"><span class="n">path</span><span class="w"></span><span class="o">=</span><span class="w"></span><span class="p" data-group-id="3554825011-1">[</span><span class="s">"author"</span><span class="p">,</span><span class="w"></span><span class="s">"name"</span><span class="p" data-group-id="3554825011-1">]</span><span class="w"></span><span class="n">from</span><span class="p" data-group-id="3554825011-2">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">json_extract_path</span><span class="p" data-group-id="3554825011-3">(</span><span class="n">field</span><span class="p" data-group-id="3554825011-4">(</span><span class="n">post</span><span class="p">,</span><span class="w"></span><span class="ss">:meta</span><span class="p" data-group-id="3554825011-4">)</span><span class="p">,</span><span class="w"></span><span class="o">^</span><span class="n">path</span><span class="p" data-group-id="3554825011-3">)</span><span class="p" data-group-id="3554825011-2">)</span></code></pre><p>The query can be also rewritten as:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="p" data-group-id="5587940112-1">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p" data-group-id="5587940112-2">[</span><span class="s">"author"</span><span class="p" data-group-id="5587940112-2">]</span><span class="p" data-group-id="5587940112-3">[</span><span class="s">"name"</span><span class="p" data-group-id="5587940112-3">]</span><span class="p" data-group-id="5587940112-1">)</span></code></pre><p>Path elements can be integers to access values in JSON arrays:</p><pre><code class="makeup elixir" translate="no"><span class="n">from</span><span class="p" data-group-id="3383432118-1">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p" data-group-id="3383432118-2">[</span><span class="s">"tags"</span><span class="p" data-group-id="3383432118-2">]</span><span class="p" data-group-id="3383432118-3">[</span><span class="mi">0</span><span class="p" data-group-id="3383432118-3">]</span><span class="p" data-group-id="3383432118-4">[</span><span class="s">"name"</span><span class="p" data-group-id="3383432118-4">]</span><span class="p" data-group-id="3383432118-1">)</span></code></pre><p>Any element of the path can be dynamic:</p><pre><code class="makeup elixir" translate="no"><span class="n">field</span><span class="w"></span><span class="o">=</span><span class="w"></span><span class="s">"name"</span><span class="w"></span><span class="n">from</span><span class="p" data-group-id="6373139890-1">(</span><span class="n">post</span><span class="w"></span><span class="ow">in</span><span class="w"></span><span class="nc">Post</span><span class="p">,</span><span class="w"></span><span class="ss">select</span><span class="p">:</span><span class="w"></span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p" data-group-id="6373139890-2">[</span><span class="s">"author"</span><span class="p" data-group-id="6373139890-2">]</span><span class="p" data-group-id="6373139890-3">[</span><span class="o">^</span><span class="n">field</span><span class="p" data-group-id="6373139890-3">]</span><span class="p" data-group-id="6373139890-1">)</span></code></pre><h2 id="json_extract_path/2-warning-indexes-on-postgresql" class="section-heading"><a href="#json_extract_path/2-warning-indexes-on-postgresql" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Warning: indexes on PostgreSQL</span></h2><p>PostgreSQL supports indexing on jsonb columns via GIN indexes.
Whenever comparing the value of a jsonb field against a string
or integer, Ecto will use the containment operator @> which
is optimized. You can even use the more efficient
  <code class="inline">jsonb_path_ops
  </code>
  GIN index variant. For more information, consult PostgreSQL's docs
on
  <a href="https://www.postgresql.org/docs/current/datatype-json.html#JSON-INDEXING">JSON indexing
  </a>.
</p>
  <h2 id="json_extract_path/2-warning-return-types" class="section-heading">
    <a href="#json_extract_path/2-warning-return-types" class="hover-link">
      <i class="ri-link-m" aria-hidden="true">
      </i>
    </a>
    <span class="text">Warning: return types
    </span>
  </h2>
  <p>The underlying data in the JSON column is returned without any
additional decoding. This means "null" JSON values are not the
same as SQL's "null". For example, the
    <code class="inline">Repo.all
    </code> operation below
returns an empty list because
    <code class="inline">p.meta["author"]
    </code> returns JSON's
null and therefore
    <code class="inline">is_nil
    </code> does not succeed:
  </p>
  <pre>
    <code class="makeup elixir" translate="no">
      <span class="nc">Repo
      </span>
      <span class="o">.
      </span>
      <span class="n">insert!
      </span>
      <span class="p" data-group-id="7592834461-1">(
      </span>
      <span class="p" data-group-id="7592834461-2">%
      </span>
      <span class="nc" data-group-id="7592834461-2">Post
      </span>
      <span class="p" data-group-id="7592834461-2">{
      </span>
      <span class="ss">meta
      </span>
      <span class="p">:
      </span>
      <span class="w">
      </span>
      <span class="p" data-group-id="7592834461-3">%{
      </span>
      <span class="ss">author
      </span>
      <span class="p">:
      </span>
      <span class="w">
      </span>
      <span class="no">nil
      </span>
      <span class="p" data-group-id="7592834461-3">}
      </span>
      <span class="p" data-group-id="7592834461-2">}
      </span>
      <span class="p" data-group-id="7592834461-1">)
      </span>
      <span class="w">
      </span>
      <span class="nc">Repo
      </span>
      <span class="o">.
      </span>
      <span class="n">all
      </span>
      <span class="p" data-group-id="7592834461-4">(
      </span>
      <span class="n">from
      </span>
      <span class="p" data-group-id="7592834461-5">(
      </span>
      <span class="n">post
      </span>
      <span class="w">
      </span>
      <span class="ow">in
      </span>
      <span class="w">
      </span>
      <span class="nc">Post
      </span>
      <span class="p">,
      </span>
      <span class="w">
      </span>
      <span class="ss">where
      </span>
      <span class="p">:
      </span>
      <span class="w">
      </span>
      <span class="n">is_nil
      </span>
      <span class="p" data-group-id="7592834461-6">(
      </span>
      <span class="n">p
      </span>
      <span class="o">.
      </span>
      <span class="n">meta
      </span>
      <span class="p" data-group-id="7592834461-7">[
      </span>
      <span class="s">"author"
      </span>
      <span class="p" data-group-id="7592834461-7">]
      </span>
      <span class="p" data-group-id="7592834461-6">)
      </span>
      <span class="p" data-group-id="7592834461-5">)
      </span>
      <span class="p" data-group-id="7592834461-4">)
      </span>
    </code>
  </pre>
  <p>Similarly, other types, such as datetimes, are returned as strings.
This means conditions like
    <code class="inline">post.meta["published_at"] > from_now(-1, "day")
    </code>
    may return incorrect results or fail as the underlying database
tries to compare incompatible types. You can, however, use
    <a href="#type/2">
      <code class="inline">type/2
      </code>
    </a>
    to force the types on the database level.
  </p>
</section>
</section>
              <section class="detail" id="like/2">
                <div class="detail-header">
                  <a href="#like/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">like(string, search)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L224" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Searches for
                    <code class="inline">search
                    </code> in
                    <code class="inline">string
                    </code>.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">like
                      </span>
                      <span class="p" data-group-id="9673686870-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">body
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"Chapter%"
                      </span>
                      <span class="p" data-group-id="9673686870-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Translates to the underlying SQL LIKE query, therefore
its behaviour is dependent on the database. In particular,
PostgreSQL will do a case-sensitive operation, while the
majority of other databases will be case-insensitive. For
performing a case-insensitive
                    <code class="inline">like
                    </code> in PostgreSQL, see
                    <a href="#ilike/2">
                      <code class="inline">ilike/2
                      </code>
                    </a>.
                  </p>
                  <p>You should be very careful when allowing user sent data to be used
as part of LIKE query, since they allow to perform
                    <a href="https://githubengineering.com/like-injection/">LIKE-injections
                    </a>.
                  </p>
                </section>
              </section>
              <section class="detail" id="literal/1">
                <div class="detail-header">
                  <a href="#literal/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">literal(binary)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L493" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Allows a literal identifier to be injected into a fragment:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">collation
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"es_ES"
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">fragment
                      </span>
                      <span class="p" data-group-id="4028198988-1">(
                      </span>
                      <span class="s">"? COLLATE ?"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">name
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">literal
                      </span>
                      <span class="p" data-group-id="4028198988-2">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">collation
                      </span>
                      <span class="p" data-group-id="4028198988-2">)
                      </span>
                      <span class="p" data-group-id="4028198988-1">)
                      </span>
                    </code>
                  </pre>
                  <p>The example above will inject
                    <code class="inline">collation
                    </code> into the query as
a literal identifier instead of a query parameter. Note that
each different value of
                    <code class="inline">collation
                    </code> will emit a different query,
which will be independently prepared and cached.
                  </p>
                </section>
              </section>
              <section class="detail" id="map/2">
                <div class="detail-header">
                  <a href="#map/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">map(source, fields)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L666" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Used in
                    <code class="inline">select
                    </code> to specify which fields should be returned as a map.
                  </p>
                  <p>For example, if you don't need all fields to be returned or
neither need a struct, you can use
                    <a href="#map/2">
                      <code class="inline">map/2
                      </code>
                    </a> to achieve both:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="0900865662-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0900865662-2">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="0900865662-2">]
                      </span>
                      <span class="p" data-group-id="0900865662-1">)
                      </span>
                    </code>
                  </pre>
                  <p>
                    <a href="#map/2">
                      <code class="inline">map/2
                      </code>
                    </a> can also be used to dynamically select fields:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">fields
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0949130668-1">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="0949130668-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="0949130668-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">fields
                      </span>
                      <span class="p" data-group-id="0949130668-2">)
                      </span>
                    </code>
                  </pre>
                  <p>If the same source is selected multiple times with a
                    <code class="inline">map
                    </code>,
the fields are merged in order to avoid fetching multiple copies
from the database. In other words, the expression below:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="3649813529-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="3649813529-2">{
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="3649813529-3">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="3649813529-4">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p" data-group-id="3649813529-4">]
                      </span>
                      <span class="p" data-group-id="3649813529-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="3649813529-5">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="3649813529-6">[
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="3649813529-6">]
                      </span>
                      <span class="p" data-group-id="3649813529-5">)
                      </span>
                      <span class="p" data-group-id="3649813529-2">}
                      </span>
                      <span class="p" data-group-id="3649813529-1">)
                      </span>
                    </code>
                  </pre>
                  <p>is expanded to:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="7213626075-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7213626075-2">{
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="7213626075-3">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7213626075-4">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="7213626075-4">]
                      </span>
                      <span class="p" data-group-id="7213626075-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="7213626075-5">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7213626075-6">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="7213626075-6">]
                      </span>
                      <span class="p" data-group-id="7213626075-5">)
                      </span>
                      <span class="p" data-group-id="7213626075-2">}
                      </span>
                      <span class="p" data-group-id="7213626075-1">)
                      </span>
                    </code>
                  </pre>
                  <p>For preloads, the selected fields may be specified from the parent:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="0652743827-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="0652743827-2">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0652743827-3">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">country
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0652743827-4">[
                      </span>
                      <span class="ss">:id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:population
                      </span>
                      <span class="p" data-group-id="0652743827-4">]
                      </span>
                      <span class="p" data-group-id="0652743827-3">]
                      </span>
                      <span class="p" data-group-id="0652743827-2">)
                      </span>
                      <span class="p" data-group-id="0652743827-1">)
                      </span>
                    </code>
                  </pre>
                  <p> It's also possible to select a struct from one source but only a subset of
fields from one of its associations:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="4698064494-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="4698064494-2">%{
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">country
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">map
                      </span>
                      <span class="p" data-group-id="4698064494-3">(
                      </span>
                      <span class="ss">country
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="4698064494-4">[
                      </span>
                      <span class="ss">:id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:population
                      </span>
                      <span class="p" data-group-id="4698064494-4">]
                      </span>
                      <span class="p" data-group-id="4698064494-3">)
                      </span>
                      <span class="p" data-group-id="4698064494-2">}
                      </span>
                      <span class="p" data-group-id="4698064494-1">)
                      </span>
                    </code>
                  </pre>
                  <p>
                    <strong>IMPORTANT
                    </strong>: When filtering fields for associations, you
MUST include the foreign keys used in the relationship,
otherwise Ecto will be unable to find associated records.
                  </p>
                </section>
              </section>
              <section class="detail" id="max/1">
                <div class="detail-header">
                  <a href="#max/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">max(value)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L315" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Calculates the maximum for the given entry.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Payment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">max
                      </span>
                      <span class="p" data-group-id="1255322842-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="p" data-group-id="1255322842-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="merge/2">
                <div class="detail-header">
                  <a href="#merge/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">merge(left_map, right_map)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L680" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Merges the map on the right over the map on the left.
                  </p>
                  <p>If the map on the left side is a struct, Ecto will check
all of the field on the right previously exist on the left
before merging.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="1869345494-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">merge
                      </span>
                      <span class="p" data-group-id="1869345494-2">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="1869345494-3">%{
                      </span>
                      <span class="ss">virtual_field
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"some_value"
                      </span>
                      <span class="p" data-group-id="1869345494-3">}
                      </span>
                      <span class="p" data-group-id="1869345494-2">)
                      </span>
                      <span class="p" data-group-id="1869345494-1">)
                      </span>
                    </code>
                  </pre>
                  <p>This function is primarily used by
                    <a href="Ecto.Query.html#select_merge/3">
                      <code class="inline">Ecto.Query.select_merge/3
                      </code>
                    </a>
                    to merge different select clauses.
                  </p>
                </section>
              </section>
              <section class="detail" id="min/1">
                <div class="detail-header">
                  <a href="#min/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">min(value)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L308" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Calculates the minimum for the given entry.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Payment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">min
                      </span>
                      <span class="p" data-group-id="2998922644-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="p" data-group-id="2998922644-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="not/1">
                <div class="detail-header">
                  <a href="#not/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">not value
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L131" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Unary
                    <code class="inline">not
                    </code> operation.
                  </p>
                  <p>It is used to negate values in
                    <code class="inline">:where
                    </code>. It is also used to match
the assert the opposite of
                    <a href="#in/2">
                      <code class="inline">in/2
                      </code>
                    </a>,
                    <a href="#is_nil/1">
                      <code class="inline">is_nil/1
                      </code>
                    </a>, and
                    <a href="#exists/1">
                      <code class="inline">exists/1
                      </code>
                    </a>.
For example:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">not
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="5875376978-1">[
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">3
                      </span>
                      <span class="p" data-group-id="5875376978-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">not
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">is_nil
                      </span>
                      <span class="p" data-group-id="5875376978-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">title
                      </span>
                      <span class="p" data-group-id="5875376978-2">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="c1"># Retrieve all the posts that doesn't have comments.
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">as
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">not
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">exists
                      </span>
                      <span class="p" data-group-id="5875376978-3">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="5875376978-4">(
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Comment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">parent_as
                      </span>
                      <span class="p" data-group-id="5875376978-5">(
                      </span>
                      <span class="ss">:post
                      </span>
                      <span class="p" data-group-id="5875376978-5">)
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">post_id
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="5875376978-4">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="5875376978-3">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="or/2">
                <div class="detail-header">
                  <a href="#or/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">left or right
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L106" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Binary
                    <code class="inline">or
                    </code> operation.
                  </p>
                </section>
              </section>
              <section class="detail" id="parent_as/1">
                <div class="detail-header">
                  <a href="#parent_as/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">parent_as(binding)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L813" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Refer to a named atom binding in the parent query.
                  </p>
                  <p>This is available only inside subqueries.
                  </p>
                  <p>See the "Named bindings" section in
                    <a href="Ecto.Query.html">
                      <code class="inline">Ecto.Query
                      </code>
                    </a> for more information.
                  </p>
                </section>
              </section>
              <section class="detail" id="selected_as/1">
                <div class="detail-header">
                  <a href="#selected_as/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">selected_as(name)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L826" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Refer to an alias of a selected value.
                  </p>
                  <p>This can be used to refer to aliases created using
                    <a href="#selected_as/2">
                      <code class="inline">selected_as/2
                      </code>
                    </a>. If
the alias hasn't been created using
                    <a href="#selected_as/2">
                      <code class="inline">selected_as/2
                      </code>
                    </a>, an error will be raised.
                  </p>
                  <p>Each database has its own rules governing which clauses can reference these aliases.
If an error is raised mentioning an unknown column, most likely the alias is being
referenced somewhere that is not allowed. Consult the documentation for the database
to ensure the alias is being referenced correctly.
                  </p>
                </section>
              </section>
              <section class="detail" id="selected_as/2">
                <div class="detail-header">
                  <a href="#selected_as/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">selected_as(selected_value, name)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L878" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Creates an alias for the given selected value.
                  </p>
                  <p>When working with calculated values, an alias can be used to simplify
the query. Otherwise, the entire expression would need to be copied when
referencing it outside of select statements.
                  </p>
                  <p>This comes in handy when, for instance, you would like to use the calculated
value in
                    <a href="Ecto.Query.html#group_by/3">
                      <code class="inline">Ecto.Query.group_by/3
                      </code>
                    </a> or
                    <a href="Ecto.Query.html#order_by/3">
                      <code class="inline">Ecto.Query.order_by/3
                      </code>
                    </a>:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2951397297-1">%{
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">posted
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="2951397297-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">posted
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:date
                      </span>
                      <span class="p" data-group-id="2951397297-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">sum_visits
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="2951397297-3">(
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="2951397297-3">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">sum
                      </span>
                      <span class="p" data-group-id="2951397297-4">(
                      </span>
                      <span class="p" data-group-id="2951397297-4">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="2951397297-5">(
                      </span>
                      <span class="ss">:sum_visits
                      </span>
                      <span class="p" data-group-id="2951397297-5">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2951397297-1">}
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">group_by
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="2951397297-6">(
                      </span>
                      <span class="ss">:date
                      </span>
                      <span class="p" data-group-id="2951397297-6">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">order_by
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="2951397297-7">(
                      </span>
                      <span class="ss">:sum_visits
                      </span>
                      <span class="p" data-group-id="2951397297-7">)
                      </span>
                    </code>
                  </pre>
                  <p>The name of the alias must be an atom and it can only be used in the outer most
select expression, otherwise an error is raised. Please note that the alias name
does not have to match the key when
                    <code class="inline">select
                    </code> returns a map, struct or keyword list.
                  </p>
                  <p>Using this in conjunction with
                    <a href="#selected_as/1">
                      <code class="inline">selected_as/1
                      </code>
                    </a> is recommended to ensure only defined aliases
are referenced.
                  </p>
                  <h2 id="selected_as/2-subqueries-and-ctes" class="section-heading">
                    <a href="#selected_as/2-subqueries-and-ctes" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">Subqueries and CTEs
                    </span>
                  </h2>
                  <p>Subqueries and CTEs automatically alias the selected fields, for example, one can write:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="c1"># Subquery
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">s
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7363183114-1">%{
                      </span>
                      <span class="ss">visits
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="7363183114-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="7363183114-2">)
                      </span>
                      <span class="p" data-group-id="7363183114-1">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="7363183114-3">(
                      </span>
                      <span class="n">s
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">subquery
                      </span>
                      <span class="p" data-group-id="7363183114-4">(
                      </span>
                      <span class="n">s
                      </span>
                      <span class="p" data-group-id="7363183114-4">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">s
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p" data-group-id="7363183114-3">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="c1"># CTE
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">cte_query
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7363183114-5">%{
                      </span>
                      <span class="ss">visits
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="7363183114-6">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="7363183114-6">)
                      </span>
                      <span class="p" data-group-id="7363183114-5">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">with_cte
                      </span>
                      <span class="p" data-group-id="7363183114-7">(
                      </span>
                      <span class="s">"cte"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">as
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">cte_query
                      </span>
                      <span class="p" data-group-id="7363183114-7">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">join
                      </span>
                      <span class="p" data-group-id="7363183114-8">(
                      </span>
                      <span class="ss">:inner
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7363183114-9">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p" data-group-id="7363183114-9">]
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"cte"
                      </span>
                      <span class="p" data-group-id="7363183114-8">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">select
                      </span>
                      <span class="p" data-group-id="7363183114-10">(
                      </span>
                      <span class="p" data-group-id="7363183114-11">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="p" data-group-id="7363183114-11">]
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p" data-group-id="7363183114-10">)
                      </span>
                    </code>
                  </pre>
                  <p>However, one can also use
                    <code class="inline">selected_as
                    </code> to override the default naming:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="c1"># Subquery
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">s
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9243014609-1">%{
                      </span>
                      <span class="ss">visits
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="9243014609-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="9243014609-2">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="9243014609-3">(
                      </span>
                      <span class="ss">:num_visits
                      </span>
                      <span class="p" data-group-id="9243014609-3">)
                      </span>
                      <span class="p" data-group-id="9243014609-1">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="9243014609-4">(
                      </span>
                      <span class="n">s
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">subquery
                      </span>
                      <span class="p" data-group-id="9243014609-5">(
                      </span>
                      <span class="n">s
                      </span>
                      <span class="p" data-group-id="9243014609-5">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">s
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">num_visits
                      </span>
                      <span class="p" data-group-id="9243014609-4">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="c1"># CTE
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">cte_query
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9243014609-6">%{
                      </span>
                      <span class="ss">visits
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="9243014609-7">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="9243014609-7">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">selected_as
                      </span>
                      <span class="p" data-group-id="9243014609-8">(
                      </span>
                      <span class="ss">:num_visits
                      </span>
                      <span class="p" data-group-id="9243014609-8">)
                      </span>
                      <span class="p" data-group-id="9243014609-6">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">with_cte
                      </span>
                      <span class="p" data-group-id="9243014609-9">(
                      </span>
                      <span class="s">"cte"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">as
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">cte_query
                      </span>
                      <span class="p" data-group-id="9243014609-9">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">join
                      </span>
                      <span class="p" data-group-id="9243014609-10">(
                      </span>
                      <span class="ss">:inner
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9243014609-11">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p" data-group-id="9243014609-11">]
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"cte"
                      </span>
                      <span class="p" data-group-id="9243014609-10">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">|>
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">select
                      </span>
                      <span class="p" data-group-id="9243014609-12">(
                      </span>
                      <span class="p" data-group-id="9243014609-13">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="p" data-group-id="9243014609-13">]
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">num_visits
                      </span>
                      <span class="p" data-group-id="9243014609-12">)
                      </span>
                    </code>
                  </pre>
                  <p>The name given to
                    <a href="#selected_as/2">
                      <code class="inline">selected_as/2
                      </code>
                    </a> can also be referenced in
                    <a href="#selected_as/1">
                      <code class="inline">selected_as/1
                      </code>
                    </a>,
as in regular queries.
                  </p>
                </section>
              </section>
              <section class="detail" id="splice/1">
                <div class="detail-header">
                  <a href="#splice/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">splice(list)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L509" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Allows a list argument to be spliced into a fragment.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">fragment
                      </span>
                      <span class="p" data-group-id="5643912084-1">(
                      </span>
                      <span class="s">"? in (?)"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">splice
                      </span>
                      <span class="p" data-group-id="5643912084-2">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="p" data-group-id="5643912084-3">[
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">3
                      </span>
                      <span class="p" data-group-id="5643912084-3">]
                      </span>
                      <span class="p" data-group-id="5643912084-2">)
                      </span>
                      <span class="p" data-group-id="5643912084-1">)
                      </span>
                    </code>
                  </pre>
                  <p>The example above will be transformed at runtime into the following:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">fragment
                      </span>
                      <span class="p" data-group-id="7805507157-1">(
                      </span>
                      <span class="s">"? in (?,?,?)"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="mi">3
                      </span>
                      <span class="p" data-group-id="7805507157-1">)
                      </span>
                    </code>
                  </pre>
                  <p>You may only splice runtime values. For example, this would not work because
query bindings are compile-time constructs:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">fragment
                      </span>
                      <span class="p" data-group-id="6476401704-1">(
                      </span>
                      <span class="s">"concat(?)"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">splice
                      </span>
                      <span class="p" data-group-id="6476401704-2">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="p" data-group-id="6476401704-3">[
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">count
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">" "
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"count"
                      </span>
                      <span class="p" data-group-id="6476401704-3">]
                      </span>
                      <span class="p" data-group-id="6476401704-2">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="struct/2">
                <div class="detail-header">
                  <a href="#struct/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">struct(source, fields)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L623" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Used in
                    <code class="inline">select
                    </code> to specify which struct fields should be returned.
                  </p>
                  <p>For example, if you don't need all fields to be returned
as part of a struct, you can filter it to include only certain
fields by using
                    <a href="#struct/2">
                      <code class="inline">struct/2
                      </code>
                    </a>:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="0463696375-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0463696375-2">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="0463696375-2">]
                      </span>
                      <span class="p" data-group-id="0463696375-1">)
                      </span>
                    </code>
                  </pre>
                  <p>
                    <a href="#struct/2">
                      <code class="inline">struct/2
                      </code>
                    </a> can also be used to dynamically select fields:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">fields
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="1176456137-1">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="1176456137-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="1176456137-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">fields
                      </span>
                      <span class="p" data-group-id="1176456137-2">)
                      </span>
                    </code>
                  </pre>
                  <p>As a convenience,
                    <code class="inline">select
                    </code> allows developers to take fields
without an explicit call to
                    <a href="#struct/2">
                      <code class="inline">struct/2
                      </code>
                    </a>:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="4285203653-1">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="4285203653-1">]
                      </span>
                    </code>
                  </pre>
                  <p>Or even dynamically:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">fields
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="7210804905-1">[
                      </span>
                      <span class="ss">:title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:body
                      </span>
                      <span class="p" data-group-id="7210804905-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">fields
                      </span>
                    </code>
                  </pre>
                  <p>For preloads, the selected fields may be specified from the parent:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="6736741974-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="6736741974-2">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="6736741974-3">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">country
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="6736741974-4">[
                      </span>
                      <span class="ss">:id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:population
                      </span>
                      <span class="p" data-group-id="6736741974-4">]
                      </span>
                      <span class="p" data-group-id="6736741974-3">]
                      </span>
                      <span class="p" data-group-id="6736741974-2">)
                      </span>
                      <span class="p" data-group-id="6736741974-1">)
                      </span>
                    </code>
                  </pre>
                  <p>If the same source is selected multiple times with a
                    <code class="inline">struct
                    </code>,
the fields are merged in order to avoid fetching multiple copies
from the database. In other words, the expression below:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="2995231277-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2995231277-2">{
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="2995231277-3">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2995231277-4">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p" data-group-id="2995231277-4">]
                      </span>
                      <span class="p" data-group-id="2995231277-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="2995231277-5">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2995231277-6">[
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="2995231277-6">]
                      </span>
                      <span class="p" data-group-id="2995231277-5">)
                      </span>
                      <span class="p" data-group-id="2995231277-2">}
                      </span>
                      <span class="p" data-group-id="2995231277-1">)
                      </span>
                    </code>
                  </pre>
                  <p>is expanded to:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="p" data-group-id="1186663032-1">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">City
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">preload
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:country
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="1186663032-2">{
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="1186663032-3">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="1186663032-4">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="1186663032-4">]
                      </span>
                      <span class="p" data-group-id="1186663032-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">struct
                      </span>
                      <span class="p" data-group-id="1186663032-5">(
                      </span>
                      <span class="n">city
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="1186663032-6">[
                      </span>
                      <span class="ss">:country_id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:name
                      </span>
                      <span class="p" data-group-id="1186663032-6">]
                      </span>
                      <span class="p" data-group-id="1186663032-5">)
                      </span>
                      <span class="p" data-group-id="1186663032-2">}
                      </span>
                      <span class="p" data-group-id="1186663032-1">)
                      </span>
                    </code>
                  </pre>
                  <p>
                    <strong>IMPORTANT
                    </strong>: When filtering fields for associations, you
MUST include the foreign keys used in the relationship,
otherwise Ecto will be unable to find associated records.
                  </p>
                </section>
              </section>
              <section class="detail" id="sum/1">
                <div class="detail-header">
                  <a href="#sum/1" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">sum(value)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L301" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Calculates the sum for the given entry.
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Payment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">sum
                      </span>
                      <span class="p" data-group-id="1989638466-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">value
                      </span>
                      <span class="p" data-group-id="1989638466-1">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
              <section class="detail" id="type/2">
                <div class="detail-header">
                  <a href="#type/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">type(interpolated_value, type)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L797" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Casts the given value to the given type at the database level.
                  </p>
                  <p>Most of the times, Ecto is able to proper cast interpolated
values due to its type checking mechanism. In some situations
though, you may want to tell Ecto that a parameter has some
particular type:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="0815758509-1">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:string
                      </span>
                      <span class="p" data-group-id="0815758509-1">)
                      </span>
                    </code>
                  </pre>
                  <p>It is also possible to say the type must match the same of a column:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="8117675077-1">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">title
                      </span>
                      <span class="p" data-group-id="8117675077-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Or a parameterized type, which must be previously initialized
with
                    <a href="Ecto.ParameterizedType.html#init/2">
                      <code class="inline">Ecto.ParameterizedType.init/2
                      </code>
                    </a>:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="na">@my_enum
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Ecto.ParameterizedType
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">init
                      </span>
                      <span class="p" data-group-id="6046636241-1">(
                      </span>
                      <span class="nc">Ecto.Enum
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">values
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="6046636241-2">[
                      </span>
                      <span class="ss">:foo
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:bar
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:baz
                      </span>
                      <span class="p" data-group-id="6046636241-2">]
                      </span>
                      <span class="p" data-group-id="6046636241-1">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="6046636241-3">(
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">title
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="na">@my_enum
                      </span>
                      <span class="p" data-group-id="6046636241-3">)
                      </span>
                    </code>
                  </pre>
                  <p>Ecto will ensure
                    <code class="inline">^title
                    </code> is cast to the given type and enforce such
type at the database level. If the value is returned in a
                    <code class="inline">select
                    </code>,
Ecto will also enforce the proper type throughout.
                  </p>
                  <p>When performing arithmetic operations,
                    <a href="#type/2">
                      <code class="inline">type/2
                      </code>
                    </a> can be used to cast
all the parameters in the operation to the same type:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="2324699633-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">visits
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">+
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">a_float
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">+
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="n">a_integer
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:decimal
                      </span>
                      <span class="p" data-group-id="2324699633-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Inside
                    <code class="inline">select
                    </code>,
                    <a href="#type/2">
                      <code class="inline">type/2
                      </code>
                    </a> can also be used to cast fragments:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="5768989603-1">(
                      </span>
                      <span class="n">fragment
                      </span>
                      <span class="p" data-group-id="5768989603-2">(
                      </span>
                      <span class="s">"NOW"
                      </span>
                      <span class="p" data-group-id="5768989603-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:naive_datetime
                      </span>
                      <span class="p" data-group-id="5768989603-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Or to type fields from schemaless queries:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"posts"
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="1656162493-1">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">cost
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:decimal
                      </span>
                      <span class="p" data-group-id="1656162493-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Or to type aggregation results:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="3507091468-1">(
                      </span>
                      <span class="n">avg
                      </span>
                      <span class="p" data-group-id="3507091468-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">cost
                      </span>
                      <span class="p" data-group-id="3507091468-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p" data-group-id="3507091468-1">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="3507091468-3">(
                      </span>
                      <span class="n">filter
                      </span>
                      <span class="p" data-group-id="3507091468-4">(
                      </span>
                      <span class="n">avg
                      </span>
                      <span class="p" data-group-id="3507091468-5">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">cost
                      </span>
                      <span class="p" data-group-id="3507091468-5">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">cost
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">>
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="3507091468-4">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p" data-group-id="3507091468-3">)
                      </span>
                    </code>
                  </pre>
                  <p>Or to type comparison expression results:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="4624572931-1">(
                      </span>
                      <span class="n">coalesce
                      </span>
                      <span class="p" data-group-id="4624572931-2">(
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">cost
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="p" data-group-id="4624572931-2">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p" data-group-id="4624572931-1">)
                      </span>
                    </code>
                  </pre>
                  <p>Or to type fields from a parent query using
                    <a href="#parent_as/1">
                      <code class="inline">parent_as/1
                      </code>
                    </a>:
                  </p>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">child
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Comment
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">type
                      </span>
                      <span class="p" data-group-id="4233843041-1">(
                      </span>
                      <span class="n">parent_as
                      </span>
                      <span class="p" data-group-id="4233843041-2">(
                      </span>
                      <span class="ss">:posts
                      </span>
                      <span class="p" data-group-id="4233843041-2">)
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:string
                      </span>
                      <span class="p" data-group-id="4233843041-1">)
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">text
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">as
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:posts
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">inner_lateral_join
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">subquery
                      </span>
                      <span class="p" data-group-id="4233843041-3">(
                      </span>
                      <span class="n">child
                      </span>
                      <span class="p" data-group-id="4233843041-3">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">select
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">c
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">text
                      </span>
                    </code>
                  </pre>
                  <h2 id="type/2-type-vs-fragment" class="section-heading">
                    <a href="#type/2-type-vs-fragment" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">
                      <code class="inline">type
                      </code> vs
                      <code class="inline">fragment
                      </code>
                    </span>
                  </h2>
                  <p>
                    <a href="#type/2">
                      <code class="inline">type/2
                      </code>
                    </a> is all about Ecto types. Therefore, you can perform
                    <code class="inline">type(expr, :string)
                    </code>
                    but not
                    <code class="inline">type(expr, :text)
                    </code>, because
                    <code class="inline">:text
                    </code> is not an actual Ecto type. If you want
to perform casting exclusively at the database level, you can use fragment. For example,
in PostgreSQL, you might do
                    <code class="inline">fragment("?::text", p.column)
                    </code>.
                  </p>
                </section>
              </section>
              <section class="detail" id="values/2">
                <div class="detail-header">
                  <a href="#values/2" class="detail-link" data-no-tooltip="data-no-tooltip" title="Link to this function">
                    <i class="ri-link-m" aria-hidden="true">
                    </i>
                    <span class="sr-only">Link to this function
                    </span>
                  </a>
                  <h1 class="signature" translate="no">values(values, types)
                  </h1>
                  <a href="https://github.com/elixir-ecto/ecto/blob/v3.12.4/lib/ecto/query/api.ex#L562" class="icon-action" rel="help" title="View Source">
                    <i class="ri-code-s-slash-line" aria-hidden="true">
                    </i>
                    <span class="sr-only">View Source
                    </span>
                  </a>
                </div>
                <section class="docstring">
                  <p>Creates a values list/constant table.
                  </p>
                  <p>A values list can be used as a source in a query, both in
                    <a href="Ecto.Query.html#from/2">
                      <code class="inline">Ecto.Query.from/2
                      </code>
                    </a>
                    and
                    <a href="Ecto.Query.html#join/5">
                      <code class="inline">Ecto.Query.join/5
                      </code>
                    </a>.
                  </p>
                  <p>The first argument is a list of maps representing the values of the constant table.
Each entry in the list must have exactly the same fields or an error is raised.
                  </p>
                  <p>The second argument is a map of types corresponding to the fields in the first argument.
Each field must be given a type or an error is raised. Any type that can be specified in
a schema may be used.
                  </p>
                  <p>Queries using a values list are not cacheable by Ecto.
                  </p>
                  <h2 id="values/2-select-example" class="section-heading">
                    <a href="#values/2-select-example" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">Select example
                    </span>
                  </h2>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">values
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2496292806-1">[
                      </span>
                      <span class="p" data-group-id="2496292806-2">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"abc"
                      </span>
                      <span class="p" data-group-id="2496292806-2">}
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2496292806-3">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"xyz"
                      </span>
                      <span class="p" data-group-id="2496292806-3">}
                      </span>
                      <span class="p" data-group-id="2496292806-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="2496292806-4">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:string
                      </span>
                      <span class="p" data-group-id="2496292806-4">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">query
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v1
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p" data-group-id="2496292806-5">(
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="p" data-group-id="2496292806-5">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">join
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v2
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p" data-group-id="2496292806-6">(
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="p" data-group-id="2496292806-6">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">on
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v1
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v2
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Repo
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">all
                      </span>
                      <span class="p" data-group-id="2496292806-7">(
                      </span>
                      <span class="n">query
                      </span>
                      <span class="p" data-group-id="2496292806-7">)
                      </span>
                    </code>
                  </pre>
                  <h2 id="values/2-delete-example" class="section-heading">
                    <a href="#values/2-delete-example" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">Delete example
                    </span>
                  </h2>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">values
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0090292318-1">[
                      </span>
                      <span class="p" data-group-id="0090292318-2">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"abc"
                      </span>
                      <span class="p" data-group-id="0090292318-2">}
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0090292318-3">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"xyz"
                      </span>
                      <span class="p" data-group-id="0090292318-3">}
                      </span>
                      <span class="p" data-group-id="0090292318-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="0090292318-4">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:string
                      </span>
                      <span class="p" data-group-id="0090292318-4">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">query
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">join
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p" data-group-id="0090292318-5">(
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="p" data-group-id="0090292318-5">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">on
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">where
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">counter
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">^
                      </span>
                      <span class="mi">0
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Repo
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">delete_all
                      </span>
                      <span class="p" data-group-id="0090292318-6">(
                      </span>
                      <span class="n">query
                      </span>
                      <span class="p" data-group-id="0090292318-6">)
                      </span>
                    </code>
                  </pre>
                  <h2 id="values/2-update-example" class="section-heading">
                    <a href="#values/2-update-example" class="hover-link">
                      <i class="ri-link-m" aria-hidden="true">
                      </i>
                    </a>
                    <span class="text">Update example
                    </span>
                  </h2>
                  <pre>
                    <code class="makeup elixir" translate="no">
                      <span class="n">values
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-1">[
                      </span>
                      <span class="p" data-group-id="9381760770-2">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">1
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"abc"
                      </span>
                      <span class="p" data-group-id="9381760770-2">}
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-3">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="mi">2
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="s">"xyz"
                      </span>
                      <span class="p" data-group-id="9381760770-3">}
                      </span>
                      <span class="p" data-group-id="9381760770-1">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-4">%{
                      </span>
                      <span class="ss">id
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:integer
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">:string
                      </span>
                      <span class="p" data-group-id="9381760770-4">}
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">query
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">=
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">from
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Post
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">join
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v
                      </span>
                      <span class="w">
                      </span>
                      <span class="ow">in
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p" data-group-id="9381760770-5">(
                      </span>
                      <span class="n">values
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">types
                      </span>
                      <span class="p" data-group-id="9381760770-5">)
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">on
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">p
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="w">
                      </span>
                      <span class="o">==
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">id
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="ss">update
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-6">[
                      </span>
                      <span class="ss">set
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-7">[
                      </span>
                      <span class="ss">text
                      </span>
                      <span class="p">:
                      </span>
                      <span class="w">
                      </span>
                      <span class="n">v
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">text
                      </span>
                      <span class="p" data-group-id="9381760770-7">]
                      </span>
                      <span class="p" data-group-id="9381760770-6">]
                      </span>
                      <span class="w">
                      </span>
                      <span class="nc">Repo
                      </span>
                      <span class="o">.
                      </span>
                      <span class="n">update_all
                      </span>
                      <span class="p" data-group-id="9381760770-8">(
                      </span>
                      <span class="n">query
                      </span>
                      <span class="p">,
                      </span>
                      <span class="w">
                      </span>
                      <span class="p" data-group-id="9381760770-9">[
                      </span>
                      <span class="p" data-group-id="9381760770-9">]
                      </span>
                      <span class="p" data-group-id="9381760770-8">)
                      </span>
                    </code>
                  </pre>
                </section>
              </section>
            </div>
          </section>
          <footer class="footer">
            <p>
              <span class="line">
                <a href="https://hex.pm/packages/ecto/3.12.4" class="footer-hex-package">Hex Package
                </a>
                <a href="https://preview.hex.pm/preview/ecto/3.12.4">Hex Preview
                </a>
              </span>
              <span class="line">
                <a href="Ecto.epub" title="ePub version">
                  Download ePub version
                </a>
              </span>
            </p>
            <p class="built-using">
              Built using
              <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc
              </a> (v0.34.2) for the

              <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language
              </a>
            </p>
          </footer>
        </div>
      </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.2.3/dist/mermaid.min.js">
    </script>
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    mermaid.initialize({
      startOnLoad: false,
      theme: document.body.className.includes("dark") ? "dark" : "default"
    });
    let id = 0;
    for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
        graphEl.innerHTML = svg;
        bindFunctions?.(graphEl);
        preEl.insertAdjacentElement("afterend", graphEl);
        preEl.remove();
      });
    }
  });
    </script>
  </body>
</html>
